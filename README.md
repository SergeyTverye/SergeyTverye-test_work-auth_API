## Описание

Данный проект представляет собой простое серверное приложение, реализованное с использованием Node.js и TypeScript. В качестве базы данных используется PostgreSQL. Для взаимодействия с базой данных используется Prisma ORM. Регистрация и аутентификация пользователей реализованы с использованием Passport.js.

Для обеспечения безопасности приложения реализованы следующие меры:
- **Использование Prisma ORM**: Обеспечивает защиту от SQL-инъекций путем безопасного формирования запросов к базе данных.
- **Хэширование паролей**: Пароли пользователей хэшируются с использованием библиотеки `bcryptjs` перед сохранением в базе данных, что предотвращает их утечку в случае компрометации базы данных.
- **Использование JWT**: Для аутентификации пользователей используется JSON Web Token (JWT), что позволяет безопасно передавать информацию о пользователе без хранения состояния на сервере.
- **Валидация данных**: Входные данные валидируются и санитизируются с использованием библиотеки `express-validator`, что предотвращает возможные атаки через ввод данных.
- **Хранение секретных данных в переменных окружения**: Все ключевые данные для безопасности, такие как секреты JWT и сессионные секреты, хранятся в переменных окружения и не включаются в исходный код.

## Требования

- Node.js
- Docker
- Docker Compose

## Установка

1. Склонируйте репозиторий:

    ```sh
    git clone https://github.com/SergeyTverye/test_work-auth_API.git
    cd test-task
    ```

2. Установите зависимости:

    ```sh
    npm install
    ```

3. Запустите PostgreSQL базу данных с помощью Docker Compose:

    ```sh
    docker-compose up -d
    ```

4. Выполните миграции базы данных и сгенерируйте Prisma Client:

    ```sh
    npx prisma migrate dev --name init

    ```

5. Запустите сервер:

    ```sh
    npm run dev
    ```

## Запуск тестов

Для запуска тестов выполните следующую команду:

```sh
npm run test
```

Тесты включают регистрацию нескольких пользователей, получение списка пользователей, обновление данных одного из пользователей и удаление одного из пользователей.

## Маршруты API

### Регистрация

**POST /api/register**

**Тело запроса:**

```json
{
  "email": "user@example.com",
  "password": "password",
  "name": "User Name"
}
```

### Аутентификация

**POST /api/login**

**Тело запроса:**

```json
{
  "email": "user@example.com",
  "password": "password"
}
```

### Получение списка пользователей

**GET /api/users**

### Обновление информации о пользователе

**PUT /api/users/:id**

**Тело запроса:**

```json
{
  "email": "newemail@example.com",
  "name": "New Name"
}
```

### Удаление пользователя

**DELETE /api/users/:id** 
